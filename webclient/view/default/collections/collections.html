<?php if(!empty($TemplateData['pagination']) && $TemplateData['pagination']['pages'] > 1) { ?>
<div class="uk-grid-small uk-grid-match uk-grid">
	<div class="uk-width-3-4">
		<ul class="uk-pagination" >
			<?php
				if($TemplateData['pagination']['curPage'] > 1) {
					echo '<li><a href="index.php?'.Summoner::createFromParameterLinkQuery($TemplateData['pagination']['currentGetParameters'],array('page'=>($TemplateData['pagination']['curPage']-1))).'">
						<span uk-pagination-previous></span></a></li>';
				}
				$ellipsisShown = 0;

				for($i=1;$i<=$TemplateData['pagination']['pages'];$i++) {
					$active = '';
					if($i == $TemplateData['pagination']['curPage']) $active = 'uk-active';
					if(in_array($i,$TemplateData['pagination']['visibleRange'])) {
						echo '<li class="'.$active.'"><a href="index.php?'.Summoner::createFromParameterLinkQuery($TemplateData['pagination']['currentGetParameters'],array('page'=>$i)).'"
							title="Goto page '.$i.'">'.$i.'</a></li>';
					}
					else {
						if($i < $TemplateData['pagination']['currentRangeStart'] && $ellipsisShown == 0) {
							echo '<li class="uk-disabled"><span>&hellip;</span></li>';
							$ellipsisShown = 1;
						}
						if($i > $TemplateData['pagination']['currentRangeEnd'] && ($ellipsisShown == 0 || $ellipsisShown == 1)) {
							echo '<li class="uk-disabled"><span>&hellip;</span></li>';
							$ellipsisShown = 2;
						}
					}
				}

				if($TemplateData['pagination']['curPage'] < $TemplateData['pagination']['pages']) {
					echo '<li><a href="index.php?'.Summoner::createFromParameterLinkQuery($TemplateData['pagination']['currentGetParameters'],array('page'=>($TemplateData['pagination']['curPage']+1))).'">
						<span uk-pagination-next></span></a></li>';
				}
			?>
		</ul>
	</div>
	<div class="uk-width-1-4">
		<div class="uk-inline">
			<button class="uk-button uk-button-default uk-button-small" type="button">Sort</button>
			<div uk-dropdown>
				<ul class="uk-nav uk-dropdown-nav">
					<?php if(!empty($TemplateData['defaultSortField'])) { ?>
					<li><a href="index.php?<?php echo Summoner::createFromParameterLinkQuery($TemplateData['pagination']['currentGetParameters'],array('s'=>$TemplateData['defaultSortField'],'sd'=>'DESC')); ?>">Default</a></li>
					<?php } else { ?>
					<li><a href="index.php?<?php echo Summoner::createFromParameterLinkQuery($TemplateData['pagination']['currentGetParameters'],array('s'=>'','sd'=>'DESC')); ?>">Latest</a></li>
					<?php } ?>

					<?php
					if(!empty($TemplateData['simpleSearchFields'])) {
						foreach($TemplateData['simpleSearchFields'] as $k=>$v) {
					?>
					<li><a href="index.php?<?php echo Summoner::createFromParameterLinkQuery($TemplateData['pagination']['currentGetParameters'],array('s'=>$k,'sd'=>'DESC')); ?>"><?php echo $v['displayname']; ?></a></li>
					<?php
						}
					}
					?>

					<li class="uk-nav-divider"></li>
					<li><a href="index.php?<?php echo Summoner::createFromParameterLinkQuery($TemplateData['pagination']['currentGetParameters'],array('sd'=>'DESC')); ?>"><span class="uk-icon uk-margin-small-right" uk-icon="icon: chevron-down"></span></a></li>
					<li><a href="index.php?<?php echo Summoner::createFromParameterLinkQuery($TemplateData['pagination']['currentGetParameters'],array('sd'=>'ASC')); ?>"><span class="uk-icon uk-margin-small-right" uk-icon="icon: chevron-up"></span></a></li>
				</ul>
			</div>
		</div>
	</div>
</div>
<?php } ?>

<h3 class="uk-h3"><?php echo Summoner::ifset($TemplateData['loadedCollection'], 'name'); ?></h3>

<?php if(!empty($TemplateData['search'])) { ?>
<div uk-alert id="searchNotice">
	<button class="uk-alert-close" type="button" uk-close></button>
	<p>Display result for: <b><?php echo $TemplateData['search']; ?></b></p>
</div>
<script type="text/javascript">
	UIkit.util.on('#searchNotice', 'hide', function () {
		window.location.href="index.php?p=collections&collection=<?php echo $TemplateData['loadedCollection']['id']; ?>";
	});
</script>
<?php } ?>

<?php if(!empty($TemplateData['entries'])) { ?>
<div class="uk-grid-small uk-grid-match" uk-grid>
	<?php foreach($TemplateData['entries']['results'] as $entryK=>$entry) { ?>
	<div class="uk-width-1-4@s uk-width-1-6@l">
		<div class="uk-card uk-card-default uk-card-small">
			<div class="uk-card-media-top">
				<?php if(Summoner::ifset($entry['fields'], 'coverimage')) { ?>
				<a href="<?php echo $TemplateData['entryLinkPrefix']; ?>&id=<?php echo $entryK; ?>">
				<img src="<?php echo $TemplateData['storagePath'].'/'.$entryK.'/'.$entry['fields']['coverimage']['value']; ?>"
					 alt="<?php echo $entry['fields']['coverimage']['displayname']; ?>">
				</a>
				<?php } ?>
			</div>
			<div class="uk-card-body uk-visible@l">
				<?php if(Summoner::ifset($entry['fields'], 'title')) { ?>
				<h3 class="uk-card-title"><?php echo $entry['fields']['title']['value']; ?></h3>
				<?php } ?>

				<?php if(Summoner::ifset($entry['fields'], 'description')) { ?>
				<p><?php echo $entry['fields']['description']['value']; ?></p>
				<?php } ?>
			</div>
			<div class="uk-card-footer">
				<a href="<?php echo $TemplateData['entryLinkPrefix']; ?>&id=<?php echo $entryK; ?>" class="uk-button uk-button-text">View</a>
			</div>
		</div>
	</div>
	<?php } ?>
</div>
<?php } elseif(!empty($TemplateData['collections'])) { ?>
<h3 class="uk-h3">Collection overview</h3>
<div class="uk-grid-small uk-grid-row-small uk-grid-row-small" uk-grid>
	<div class="uk-width-2-3@m uk-width-1-2@xl">
		<dl class="uk-description-list uk-description-list-divider">
			<?php foreach($TemplateData['collections'] as $k=>$v) { ?>
			<dt><a href="index.php?p=collections&collection=<?php echo $k; ?>"><?php echo $v['name']; ?></a></dt>
			<dd><?php echo $v['description']; ?></dd>
			<?php } ?>
		</dl>
	</div>
</div>
<?php } ?>
