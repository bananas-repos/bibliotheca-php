<div class="field-row-stacked">
	<label for="<?php echo $field['identifier']; ?>">
		<?php echo $I18n->t($field['displayname']); ?>
		(<span id="<?php echo $field['identifier']; ?>_counter" ><?php echo 255-strlen($TemplateData['editData'][$field['identifier']] ?? ''); ?></span>)
	</label>
	<textarea autocomplete="off"
			  id="<?php echo $field['identifier']; ?>"
			  rows="3" maxlength="255"
			  name="fdata[<?php echo $field['identifier']; ?>]"><?php echo $TemplateData['editData'][$field['identifier']] ?? ''; ?></textarea>

	<?php if(isset($field['bulkedit'])) { ?>
	<select  name="fdata[additionalEditOption][<?php echo $field['identifier']; ?>]">
		<option value=""><?php echo $I18n->t('manageentry.select.bulkedit'); ?></option>
		<option value="add"><?php echo $I18n->t('manageentry.select.bulkedit.add'); ?></option>
		<option value="replace"><?php echo $I18n->t('manageentry.select.bulkedit.replace'); ?></option>
		<option value="empty"><?php echo $I18n->t('manageentry.select.bulkedit.clear'); ?></option>
	</select>
	<?php } ?>
</div>

<script type="text/javascript">
{
	const textarea = document.getElementById("<?php echo $field['identifier']; ?>");
	const textareaCounter = document.getElementById("<?php echo $field['identifier']; ?>_counter");

	textarea.addEventListener("input", event => {
		const target = event.currentTarget;
		const maxLength = target.getAttribute("maxlength");
		const currentLength = target.value.length;

		textareaCounter.innerHTML = `${maxLength - currentLength}`;
	});
}
</script>
